<div class="tile is-ancestor">
  <div class="tile is-parent">
    <article class="tile is-child notification is-dark has-text-centered">
      <div class="is-size-2 mb-1">ğŸ“</div>
      <p class="title is-5 has-text-white">Location</p>
      <p class="has-text-white">{{station.name}}</p>
      <p class="has-text-white is-size-7">Lat {{station.lat}}, Lng {{station.lng}}</p>
      {{#if live}}
        <p class="has-text-white is-size-7">Time: {{live.when}}</p>
      {{/if}}

      {{!-- IoT quick status --}}
      {{#if iot.telemetry}}
        <p class="mt-2">
          <span class="tag is-info is-light">IoT LIVE</span>
          {{#if iot.isHot}}
            <span class="tag is-danger is-light ml-1">TEMP_HIGH</span>
          {{/if}}
        </p>
      {{else}}
        <p class="mt-2">
          <span class="tag is-light">IoT: no telemetry</span>
        </p>
      {{/if}}
    </article>
  </div>

  <div class="tile is-parent">
    <article class="tile is-child notification is-dark has-text-centered">
      <p class="title is-5 has-text-white mb-2">Weather</p>
      {{#if live}}
        {{#if live.iconId}}
          <figure class="image is-64x64 is-inline-block mb-2">
            <img alt="weather icon" src="https://openweathermap.org/img/wn/{{live.iconId}}@2x.png">
          </figure>
        {{/if}}
        <p class="has-text-white">{{live.description}}</p>
        <p class="has-text-white is-size-7">code {{live.code}}</p>
      {{else}}
        <p class="has-text-white">No data</p>
      {{/if}}
    </article>
  </div>

  {{!-- OpenWeather temperature tile --}}
  <div class="tile is-parent">
    <article class="tile is-child notification is-dark has-text-centered">
      <div class="is-size-2 mb-1">ğŸŒ¡ï¸</div>
      <p class="title is-5 has-text-white">Temp (OWM)</p>
      {{#if live}}
        <p class="has-text-white">{{live.temp}} Â°C</p>
        <p class="has-text-white">{{f live.temp}} Â°F</p>
        <p class="has-text-white is-size-7">Max: {{live.tempMax}} Â°C</p>
        <p class="has-text-white is-size-7">Min: {{live.tempMin}} Â°C</p>
      {{else}}
        <p class="has-text-white">No data</p>
      {{/if}}
    </article>
  </div>

  {{!-- IoT temperature tile --}}
  <div class="tile is-parent">
    <article class="tile is-child notification {{#if iot.isHot}}is-danger{{else}}is-dark{{/if}} has-text-centered">
      <div class="is-size-2 mb-1">ğŸ“Ÿ</div>
      <p class="title is-5 has-text-white">Temp (IoT)</p>

      {{#if iot.telemetry}}
        <p class="has-text-white">{{iot.telemetry.temperature}} Â°C</p>
        <p class="has-text-white is-size-7">Humidity: {{iot.telemetry.humidity}} %</p>
        <p class="has-text-white is-size-7">Pressure: {{iot.telemetry.pressure}} hPa</p>
        <p class="has-text-white is-size-7">Wind: {{iot.telemetry.windSpeed}} m/s</p>
        <p class="has-text-white is-size-7">Time: {{iot.telemetry.timestamp}}</p>
      {{else}}
        <p class="has-text-white">No telemetry</p>
      {{/if}}

      {{!-- Comparison --}}
      {{#if iot.telemetry}}
        {{#if live}}
          <p class="mt-2">
            <span class="tag is-light">
              IoT vs OWM: {{iot.telemetry.temperature}}Â°C vs {{live.temp}}Â°C
            </span>
          </p>
        {{/if}}
      {{/if}}
    </article>
  </div>

  <div class="tile is-parent">
    <article class="tile is-child notification is-dark has-text-centered">
      <div class="is-size-2 mb-1">ğŸŒ¬ï¸</div>
      <p class="title is-5 has-text-white">Wind</p>
      {{#if live}}
        <p class="has-text-white">{{bft live.windSpeed}} bft</p>
        <p class="has-text-white">Speed: {{fmtWind live.windSpeed}} m/s</p>
        <p class="has-text-white">Dir: {{live.windDirection}}</p>
      {{else}}
        <p class="has-text-white">No data</p>
      {{/if}}
    </article>
  </div>

  <div class="tile is-parent">
    <article class="tile is-child notification is-dark has-text-centered">
      <div class="is-size-2 mb-1">ğŸ§­</div>
      <p class="title is-5 has-text-white">Pressure</p>
      {{#if live}}
        <p class="has-text-white">{{fmtPressure live.pressure}} hPa</p>
      {{else}}
        <p class="has-text-white">No data</p>
      {{/if}}
    </article>
  </div>
</div>

{{!-- Optional: last event banner under tiles --}}
{{#if iot.event}}
  <div class="notification {{#if iot.isHot}}is-warning{{else}}is-light{{/if}} mt-4">
    <strong>Last IoT Event:</strong> {{iot.event.type}} â€” {{iot.event.message}}
    <span class="is-size-7 has-text-grey">({{iot.event.timestamp}})</span>
  </div>
{{/if}}

